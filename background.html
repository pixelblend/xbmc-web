<html>
<head> 
  <title>XBMC</title>
  <script src="scripts/vendor/jquery-1.6.2.js" type="text/javascript" charset="utf-8"></script>
  <script src="scripts/vendor/underscore.js" type="text/javascript" charset="utf-8"></script>
  <script src="scripts/vendor/backbone.js" type="text/javascript" charset="utf-8"></script>
  <script src="scripts/xbmc.options.js" type="text/javascript" charset="utf-8"></script>
  <script src="scripts/xbmc.store.js" type="text/javascript" charset="utf-8"></script>
  <script src="scripts/xbmc.model.js" type="text/javascript" charset="utf-8"></script>
  <script src="scripts/xbmc.controller.js" type="text/javascript" charset="utf-8"></script>
  <link rel="stylesheet" type="text/css" href="stylesheets/application.css" />
</head>
<body id="background">  
  <h1>XMBC</h1>
  <noscript>Javascript is not running for some insane reason. It should be.</noscript>
  <script type="text/javascript" charset="utf-8">
    port = chrome.extension.connect({name: "playlist"});
    chrome.extension.onConnect.addListener(function(port) {
      port.onMessage.addListener(function(msg) {
        console.log('from popup: '+msg);
        xbmc.controller[msg]();
      });
    });
    xbmc.view = port;
    xbmc.controller.pollForState();
  </script>
</body>
</html>